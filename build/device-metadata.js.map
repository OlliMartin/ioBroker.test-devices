{
  "version": 3,
  "sources": ["../src/device-metadata.ts"],
  "sourcesContent": ["import ChannelDetector from '@iobroker/type-detector';\n\nexport const deviceTypeBlacklist: string[] = ['chart'];\n\nexport const getDeviceNamesMissingDefaultRoles = (\n\tallDevices: ioBroker.DeviceDefinition[],\n\tlogCb: (msg: string) => void,\n): string[] => {\n\tconst devicesWithMissingDefaultRoles = allDevices.filter(\n\t\td => d.states.filter(s => s.required && !s.defaultRole).length > 0,\n\t);\n\n\tconst deviceNamesWithMissingDefaultRoles = devicesWithMissingDefaultRoles.map(d => d.name);\n\n\tif (devicesWithMissingDefaultRoles.length > 0) {\n\t\tlogCb(\n\t\t\t`Found ${devicesWithMissingDefaultRoles.length} devices with missing default roles: [${deviceNamesWithMissingDefaultRoles.join(\n\t\t\t\t', ',\n\t\t\t)}] These will be skipped.`,\n\t\t);\n\t}\n\n\treturn deviceNamesWithMissingDefaultRoles;\n};\n\nexport const getDeviceMetadata: (logCb: (msg: string) => void) => ioBroker.DeviceDefinition[] = logCb => {\n\tconst knownPatterns = ChannelDetector.getPatterns();\n\n\tconst allDevices = Object.entries(knownPatterns)\n\t\t.filter(([k, _]) => !deviceTypeBlacklist.includes(k))\n\t\t.map(([k, v]) => ({\n\t\t\t...v,\n\t\t\tstates: v.states.filter(s => !!s.defaultRole),\n\t\t\tname: k,\n\t\t}));\n\n\tconst deviceNamesWithMissingDefaultRoles = getDeviceNamesMissingDefaultRoles(allDevices, logCb);\n\treturn allDevices.filter(d => !deviceNamesWithMissingDefaultRoles.includes(d.name));\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAA4B;AAErB,MAAM,sBAAgC,CAAC,OAAO;AAE9C,MAAM,oCAAoC,CAChD,YACA,UACc;AACd,QAAM,iCAAiC,WAAW;AAAA,IACjD,OAAK,EAAE,OAAO,OAAO,OAAK,EAAE,YAAY,CAAC,EAAE,WAAW,EAAE,SAAS;AAAA,EAClE;AAEA,QAAM,qCAAqC,+BAA+B,IAAI,OAAK,EAAE,IAAI;AAEzF,MAAI,+BAA+B,SAAS,GAAG;AAC9C;AAAA,MACC,SAAS,+BAA+B,MAAM,yCAAyC,mCAAmC;AAAA,QACzH;AAAA,MACD,CAAC;AAAA,IACF;AAAA,EACD;AAEA,SAAO;AACR;AAEO,MAAM,oBAAmF,WAAS;AACxG,QAAM,gBAAgB,qBAAAA,QAAgB,YAAY;AAElD,QAAM,aAAa,OAAO,QAAQ,aAAa,EAC7C,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,oBAAoB,SAAS,CAAC,CAAC,EACnD,IAAI,CAAC,CAAC,GAAG,CAAC,OAAO;AAAA,IACjB,GAAG;AAAA,IACH,QAAQ,EAAE,OAAO,OAAO,OAAK,CAAC,CAAC,EAAE,WAAW;AAAA,IAC5C,MAAM;AAAA,EACP,EAAE;AAEH,QAAM,qCAAqC,kCAAkC,YAAY,KAAK;AAC9F,SAAO,WAAW,OAAO,OAAK,CAAC,mCAAmC,SAAS,EAAE,IAAI,CAAC;AACnF;",
  "names": ["ChannelDetector"]
}
